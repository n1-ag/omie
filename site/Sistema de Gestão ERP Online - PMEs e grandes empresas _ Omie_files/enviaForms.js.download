let formHubspot=document.querySelectorAll(".form-hubspot"),inputOrigem=document.querySelectorAll(".form-hubspot [name=origem_de_convesao]"),email=!1,telefone=!1,cnpj=!1,pageRef=window.location.href,title=document.title;function getHubSpotUTK(){var a="hubspotutk=",t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){var o=t[e].trim();if(0===o.indexOf(a))return o.substring(a.length,o.length)}return null}inputOrigem.forEach(e=>e.value=pageRef);let getGa4ClientIdForms=()=>{var e=document.cookie.match(/(?:^|; )_ga=([^;]+)/);return!e||(e=e[1].split(".")).length<4?null:e[2]+"."+e[3]},getDeviceType=()=>{var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},dataLayerFunc=(e,a,t,o,r,n)=>{window.dataLayer=window.dataLayer||[],dataLayer.push({event:"Interaction",EventCategory:""+e,EventAction:""+a,TipoLead:""+t,page_ref:""+o,doc_type:"CNPJ",faturamento:r,event_hash:n,..."lead-trial"===t?{labelTrialFaturamento:"trial_midia_faturamento_81000",idAdsTrialFaturamento:"zWo9COfv58UZEK7T_9ID"}:""})},erroEnvio=e=>{e.innerHTML+=DOMPurify.sanitize('<p class="msg-error mb-0 fw-bold">Erro eo enviar dados, por favor, tente novamente em instantes.</p>')},disparaTagsSite=(e,a,t)=>{switch(e){case"comercial":function o(){window.uetq=window.uetq||[],window.uetq.push("event","submit_lead_comercial_bing",{})}dataLayerFunc("omie-lead-sucesso","lead-comercial-envio-sucesso","lead-comercial",pageRef,a,t),window.lintrk("track",{conversion_id:7178225}),o(),"function"==typeof fbq&&(fbq("track","Purchase",{currency:"USD",value:30}),fbq("track","Lead"));break;case"contadores":dataLayerFunc("omie-lead-sucesso","lead-contador-envio-sucesso","lead-contador",pageRef,null,t),window.lintrk("track",{conversion_id:17399617}),window.uetq=window.uetq||[],window.uetq.push("event","submit_lead_contadores_bing",{}),"function"==typeof fbq&&fbq("track","Lead");break;case"gclick":dataLayerFunc("omie-lead-sucesso","lead-gclick-envio-sucesso","lead-gclick",pageRef,null,t),window.lintrk("track",{conversion_id:17399625}),window.uetq=window.uetq||[],window.uetq.push("event","submit_lead_gclick_form",{}),"function"==typeof fbq&&fbq("track","Lead");break;case"franqueado":dataLayerFunc("omie-lead-sucesso","lead-franqueado-envio-sucesso","lead-franqueado",pageRef,null,t),window.lintrk("track",{conversion_id:6682065}),"function"==typeof fbq&&fbq("track","Lead");break;case"contadores-ecossistema":dataLayerFunc("omie-lead-sucesso","lead-contadores-ecossistema-envio-sucesso","lead-contador-ecossistema",pageRef,null,t),"function"==typeof fbq&&fbq("track","Lead");break;case"decola-contador":dataLayerFunc("omie-lead-sucesso","lead-contador-decola","lead-contador-decola",pageRef,null,t);break;case"pre-lead":dataLayer.push({event:"trial_pre_lead",event_hash:t});break;case"pre-lead-comercial":dataLayer.push({event:"comercial_pre_lead",event_hash:t});break;case"form-leadwpp":window.dataLayer=window.dataLayer||[],dataLayer.push({event:"Interaction",EventCategory:"whatsapp-lead-sucesso",EventAction:"lead-whatsapp-envio-sucesso",TipoLead:"lead-whatsapp",event_hash:t}),window.lintrk("track",{conversion_id:17238473});break;case"evento-buscas-online":dataLayer.push({event:"campanhas_live"});break;case"reforma-tributaria-inscricao-evento":break;case"materiais-ricos":dataLayer.push({event:"pre_lead_materiais_ricos"});break;case"reforma-tributaria-news":break;case"trial":function o(){window.uetq=window.uetq||[],window.uetq.push("event","submit_lead_comercial_bing",{})}dataLayerFunc("omie-lead-sucesso","lead-comercial-envio-sucesso","lead-comercial",pageRef,a,t),window.lintrk("track",{conversion_id:7178225}),o(),"function"==typeof fbq&&(fbq("track","Purchase",{currency:"USD",value:30}),fbq("track","Lead")),dataLayerFunc("omie-lead-sucesso","lead-trial-envio-sucesso","lead-trial",pageRef,a,t),window.dataLayer=window.dataLayer||[],dataLayer.push({event:"form_submit_trial_comercial"});break;case"material-rico":window.dataLayer=window.dataLayer||[],dataLayer.push({event:"form_submit_material_rico",event_hash:t});break;case"indica-omie":window.dataLayer=window.dataLayer||[],dataLayer.push({event:"form_submit_omielover_indica",event_hash:t})}},ciraError=(e,a)=>{var t=document.createElement("span"),a=(t.classList.add("text-danger","erro-campo"),t.innerText=a||"Campo inválido!",document.querySelector(".erro-"+e.name));a||(e.classList.add("invalido"),t.classList.add("erro-"+e.name),e.insertAdjacentElement("afterend",t))},formIsValid=e=>{let o=!0;var r=e?.firstname?.value||!1;if(r&&!/^[\p{L}]+(?: [\p{L}]+)*$/u.test(r.trim())&&(ciraError(e.firstname,"Caracteres especiais e alfanúmericos não são válidos!"),o=!1),!e?.phone||(telefone=/^\([1-9]{2}\)(?:[2-8][0-9]{3}|9[0-9]{4})-[0-9]{4}$/.test(e.phone.value))||(ciraError(e.phone),o=!1),!e?.cnpj||(cnpj=/(^\d{3}\.\d{3}\.\d{3}\-\d{2}$)|(^\d{2}\.\d{3}\.\d{3}\/\d{4}\-\d{2}$)/.test(e.cnpj.value))||(ciraError(e.cnpj),o=!1),e?.faturamento&&!e.faturamento.value&&(ciraError(e.faturamento),o=!1),e?.email&&(email=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email.value),(r=e.email.value).includes("@omie")||r.includes("@teste"))&&(alert("Emails @omie não são permitidos"),ciraError(e.email),o=!1),"0ecec5e7-3cee-4e3f-ad40-71a97d350920"===e.dataset.id){r=document.querySelectorAll(".interesse-hs");let a=!1,t=null;r.forEach(e=>{e.checked&&(a=!0,t=e)}),a||(document.querySelector(".msg-erro-checkbox").classList.remove("d-none"),o=!1),"Outros"==t.value&&""==document.querySelector("#hs_persona").value&&(ciraError(e.hs_persona),o=!1),"Interesse em se tornar contador parceiro"==t.value&&""==document.querySelector("#produtos_contabeis").value&&(ciraError(e.produtos_contabeis),o=!1)}return"c4c240d4-94d9-4165-a2ab-32958f1fb82a"!==e.dataset.id||((cnpj=/(^\d{3}\.\d{3}\.\d{3}\-\d{2}$)|(^\d{2}\.\d{3}\.\d{3}\/\d{4}\-\d{2}$)/.test(e.cnpj_empresa_indicada.value))||(ciraError(e.cnpj_empresa_indicada),o=!1),telefone=/^\([1-9]{2}\)(?:[2-8][0-9]{3}|9[0-9]{4})-[0-9]{4}$/.test(e.telefone_indicacao.value))||(ciraError(e.telefone_indicacao),o=!1),o},enviaForm=async e=>{e.preventDefault();let n=getHubSpotUTK(),i=e.target,d=i.dataset.id,c=i.dataset.formulario,s="",l=i.querySelector("input.hs-button"),u=(l.classList.add("d-none"),document.createElement("button"));u.classList.add("hs-button","btn-loading"),u.disabled=!0,u.innerText="Enviando...";e=document.querySelector(".btn-loading");if(formIsValid(i)){e?u.classList.remove("d-none"):l.insertAdjacentElement("afterend",u);let o=null;"f9189ec3-1f73-49e3-8ec9-a0a2ec085313"===d&&(o=i.faturamento.value);e=document.querySelectorAll(`#${i.id} .input-hsb`);let a={fields:Array.from(e).map(e=>({name:e.name,value:DOMPurify.sanitize(e.value)})),context:{pageUri:pageRef,pageName:pageRef}};var e=getGa4ClientIdForms()||"",m=getDeviceType();let r=d+`_${e}_`+(new Date).getTime();if(a.fields.push({name:"eu_aceito_as_condicoes_do_termo_de_uso",value:!0},{name:"gclid",value:e||""},{name:"website",value:pageRef},{name:"device",value:m}),"0ecec5e7-3cee-4e3f-ad40-71a97d350920"===d){var e=document.querySelectorAll(".interesse-hs"),m=Array.from(document.querySelectorAll(".eu_sou")).filter(e=>e.checked)[0].value,t=window.location.href.split("?evento=")[1]||"";if(!t)return alert("Url inválida!"),void(window.location.href="/forms/eventos/");s=Array.from(e).filter(e=>e.checked)[0].value,a.fields.push({name:"evento_de_inscricao",value:t},{name:"interesse",value:s},{name:"eu_sou",value:m})}"39a07a49-cd00-4ae6-b7ee-cd71e9ee0b7a"===d&&(e=Array.from(document.querySelectorAll(".eu_sou")).filter(e=>e.checked)[0].value,a.fields.push({name:"e_mail_sdr",value:"Contador"===e?"karina.nascimento@omie.com.br":""},{name:"eu_sou",value:e}));var t=document.querySelectorAll('[name ="tipo_de_lead"]'),e=(0!=t.length&&Array.from(t).filter(e=>e.checked)[0]&&(m=Array.from(t).filter(e=>e.checked)[0].value,a.fields.push({name:"tipo_de_lead",value:m})),document.querySelectorAll('[name ="voce_ja_e_parceiro_omie"]'));if(0!=e.length&&Array.from(e).filter(e=>e.checked)[0]&&(t=Array.from(e).filter(e=>e.checked)[0].value,a.fields.push({name:"voce_ja_e_parceiro_omie",value:t})),"18251cd8-5ca1-45fa-883c-3bdb339fc73a"===d||"7506fcd7-7e05-436a-ab81-d791f10b5c8e"===d||"f2530825-8c65-4e64-9953-f2b54b993e43"===d)fetch("/api/get-cnae.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:i.cnpj.value})}).then(e=>e.json()).then(e=>{e=e.estabelecimentos?e.estabelecimentos[0].cnae_fiscal_principal:"";a.fields.push({name:"cnae_descricao",value:e}),fetch("/api/forms.php?ts=2025.003",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:a.fields,formId:d,pageUri:a.context.pageUri,pageName:a.context.pageName,hutk:n})}).then(e=>e.json()).then(e=>{e.status||"error"==e.status?erroEnvio(i):(e.redirectUri?setTimeout(()=>{u.classList.add("d-none"),window.location.href=e.redirectUri},1e3):(i.classList.add("d-none"),document.querySelectorAll(".after-remove-submit").forEach(e=>e.classList.add("d-none")),i.nextElementSibling.innerHTML=DOMPurify.sanitize(e.inlineMessage),u.classList.add("d-none")),disparaTagsSite(c,null,r))}).catch(e=>{erroEnvio(i),console.error(e)})});else{pageRef.includes("?og=banner_plg")&&(d="d1ae6e91-5851-4e00-a8d6-17a8a4bfaaad");let t=!1;if(null!=o&&"81000"==o&&"f9189ec3-1f73-49e3-8ec9-a0a2ec085313"==d){m=encodeURIComponent(i.email.value);let a=`redirect_to=&cookie_blog=true&nickname=${i.firstname.value}&user_email=${m}&phone=${i.phone.value}&company=${i.firstname.value}&company_document=${i.cnpj.value}&faturamento=${o}&objetivo_ao_fazer_o_trial=Outros&accept=true&token=s47b6hz58z0f`;await $.ajax({type:"POST",url:"https://app.omie.com.br/register/",xhrFields:{withCredentials:!0},data:a,success:function(e){"REGISTER_FAIL"==e.status&&(t=!0,fetch("/api/error-log.php",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({msg:`Form. ${JSON.stringify(e)} 

 ${a} 

`+e.message,canal:"C091339THTJ"})}))},error:function(e){t=!0;var a=document.createElement("div"),e=e.responseJSON?.message,e=(a.innerHTML=DOMPurify.sanitize(e),a.textContent||a.innerText||"");(e.includes("email")||e.includes("e-mail"))&&ciraError(i.email,e),u.classList.add("d-none"),l.classList.remove("d-none")}}),d="e0d52240-0d1c-44b7-a6c1-b92504c3b54d",c="trial"}t||(fetch("/api/forms.php?ts=2025.003",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:a.fields,formId:d,pageUri:a.context.pageUri,pageName:a.context.pageName,hutk:n})}).then(e=>e.json()).then(e=>{e.status||"error"==e.status?erroEnvio(i):(disparaTagsSite(c,o,r),e.redirectUri?setTimeout(()=>{u.classList.add("d-none"),window.location.href=e.redirectUri},1e3):(i.classList.add("d-none"),document.querySelectorAll(".after-remove-submit").forEach(e=>e.classList.add("d-none")),i.nextElementSibling.innerHTML=DOMPurify.sanitize(e.inlineMessage),u.classList.add("d-none")),"0ecec5e7-3cee-4e3f-ad40-71a97d350920"===d&&dataLayer.push({event:"form_eventos",interesse:s}))}).catch(e=>{erroEnvio(i),console.error(e)}),"eb175e81-06b1-405d-9ede-acd6dba6c85f"===d?(window.dataLayer=window.dataLayer||[],dataLayer.push({event:"Interaction",EventCategory:"omie-download-sondagem",EventAction:"download-sondagem-envio-sucesso",TipoLead:"download-sondagem"}),setTimeout(()=>{var e=document.querySelector(".btn-sondagem-download");e&&e.click()},1e3)):"b13e5b0f-6de1-4253-ad86-d6812b75042c"===d?setTimeout(()=>{document.querySelector("#btn-down-radar").click()},1e3):"4751ce6b-a3db-4aa6-acaf-6ce4571a6cda"===d?setTimeout(()=>{var e=document.querySelector(".btn-download-master");e&&e.click(),document.querySelector("#modal-comercial h3").innerText="Obrigado por baixar nosso material"},1e3):"ec5fb0b3-0b34-4628-a884-50dbd5d74c38"===d?(window.dataLayer=window.dataLayer||[],dataLayer.push({event:"Interaction",EventCategory:"omie-download-boletim-mensal",EventAction:"download-boletim-mensal-envio-sucesso",TipoLead:"download-boletim-mensal"}),setTimeout(()=>{var e=document.querySelector(".btn-boletim-download");e&&e.click()},1e3)):"35d44789-e545-44bc-9d3e-966c39454a73"===d?setTimeout(()=>{var e=document.querySelector(".cta-bf-download");e&&e.click()},1e3):"675f9d95-fe98-4edd-8ee4-5174763648ae"===d?(window.dataLayer=window.dataLayer||[],dataLayer.push({event:"Interaction",EventCategory:"omie-download-boletim-trimestral",EventAction:"download-boletim-trimestral-envio-sucesso",TipoLead:"download-boletim-trimestral"})):"e15e5491-3b3d-47d1-8027-7bc8275cd994"===d?setTimeout(()=>{var e=document.querySelector(".btn-sondagem-download");e&&e.click(),window.dataLayer=window.dataLayer||[],dataLayer.push({event:"download_sondagem"}),window.open("/anuario/e-book_report_sondagem_Omie_2_2025.pdf","_blank")},1e3):"b1d039fc-2dd7-4224-9c37-b83ac9da4864"===d?setTimeout(()=>{var e=document.querySelector(".btn-sondagem-download");e&&e.click(),window.dataLayer=window.dataLayer||[],dataLayer.push({event:"download_sondagem"})},1e3):"4815660c-a9f5-4096-9e96-439910ad2ab1"==d?setTimeout(()=>{var e=document.querySelector(".dow-5-est");e&&e.click()},1e3):"98131605-a1b5-4cba-b897-d13a62cb875f"==d&&setTimeout(()=>{var e=document.querySelector(".btn-multivarejo1"),a=document.querySelector(".btn-multivarejo2");e&&e.click(),a&&a.click()},1e3))}}else l.classList.remove("d-none")},limparErros=e=>{var a=document.querySelector(".erro-"+e.target.name);a&&(e.target.classList.remove("invalido"),a.remove())};formHubspot.forEach(e=>e.addEventListener("input",e=>limparErros(e))),formHubspot.forEach(e=>e.addEventListener("submit",enviaForm));